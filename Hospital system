import random
from enum import Enum


class PatientGender(Enum):
    MALE = "Male"
    FEMALE = "Female"
    OTHER = "Other"


class Patient:
    '''
    This class represents a patient who is registered in the hospital

    Attributes:
    - patient_id: The unique ID assigned to represent a patient
    - name: the name of the patient
    - age: the age of the patient
    - gender: the gender of the patient (Male, Female, or Other)
    - medical_history: the recorded medical history of a patient (for a new patient, it will be none since they are considered new with no history)
    - current_condition: the current condition of a patient (for a new patient, it will be none since they are new)
    - appointment: the scheduled appointment for the patient (for a new patient, it will be none because they have not scheduled an appointment)

    '''
    def __init__(self, patient_id, name, age, gender, medical_history=None, current_condition=None, appointment=None):
        self.patient_id = patient_id
        self.name = name
        self._age = age
        self._gender = gender
        self.medical_history = medical_history if medical_history else []
        self.current_condition = current_condition if current_condition else ""
        self.appointment = appointment
        self.prescriptions = Stack()

    def get_age(self):
        return self._age

    def set_age(self, value):
        if value < 0:
            raise ValueError("Age cannot be negative.")
        self._age = value

    def get_gender(self):
        return self._gender

    def set_gender(self, value):
        if value not in PatientGender:
            raise ValueError("Invalid gender value. Gender must be 'Male', 'Female', or 'Other'.")
        self._gender = value.value

class Doctor:
    '''
    This class represents a doctor currently employed in the hospital

    Attributes:
    - doctor_id: The unique ID assigned to a doctor
    - name: The name of a doctor
    - specialty: The current specialty of the doctor
    - availability: An indicator of whether the doctor is available

    '''
    def __init__(self, doctor_id, name, specialty, availability=None):
        self.doctor_id = doctor_id
        self.name = name
        self.specialty = specialty
        self.availability = availability if availability else []
        self.patients = Queue()

class Prescription:
    def __init__(self, prescription_id, medication, dosage, issue_date, doctor_id):
        self.prescription_id = prescription_id
        self.medication = medication
        self._dosage = dosage
        self.issue_date = issue_date
        self.doctor_id = doctor_id

    def get_dosage(self):
        return self._dosage

    def set_dosage(self, value):
        if not value:
            raise ValueError("Dosage cannot be empty.")
        self._dosage = value

class Queue:
    def __init__(self):
        self.items = []

    def enqueue(self, item):
        self.items.append(item)

    def dequeue(self):
        if not self.is_empty():
            return self.items.pop(0)
        else:
            return None

    def is_empty(self):
        return len(self.items) == 0

    def size(self):
        return len(self.items)

class Stack:
    def __init__(self):
        self.items = []

    def push(self, item):
        self.items.append(item)

    def pop(self):
        if not self.is_empty():
            return self.items.pop()
        else:
            return None

    def is_empty(self):
        return len(self.items) == 0

    def size(self):
        return len(self.items)
